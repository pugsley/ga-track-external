/*! ga-track-external.js v0.8 Tama Pugsley, springload.co.nz | MIT License (http://en.wikipedia.org/wiki/MIT_License) */
var gtrack=gtrack||function(e,t,n){"use strict";function s(e){if(e.tagName&&e.tagName.toUpperCase()==="A"){return e}else{if(e.parentNode){return s(e.parentNode)}else{return false}}}function o(e){if(typeof _gaq!="undefined"){_gaq.push(["_trackPageview",e])}}function u(e,t,n,r){if(typeof _gaq!="undefined"){_gaq.push(["_trackEvent",e,t,n,r])}}function a(e){var t=e.href.substring(7);t=t.replace(/^\s+|\s+$/g,"");t=t.replace("%20","");if(i.opt.trackingMode==="event"){u("Mailto",t)}else{t="/mailto/"+t;o(t)}}function f(e,t){var n=e.pathname;if(e.pathname.charAt(0)!=="/"){n="/"+n}if(e.search&&e.pathname.indexOf(e.search)===-1){n+=e.search}if(t){n=e.hostname+n}if(i.opt.trackingMode==="event"){if(t){u("External",n)}else{u("File",n)}}else{if(t){n="/external/"+n}o(n)}}function l(n){n=n||e.event;var r=n.target||n.srcElement||t;var o=s(r);if(o){return i.check(o)}}var r=false;var i={opt:{trackingMode:"event",hostRegex:new RegExp("^"+n.host.toString()+"$"),trackFiles:true,trackExternalLinks:true,trackMailtos:true,bindEvents:true,extensions:"docx?|xlsx?|pptx?|txt|vsd|vxd|eps|jpg|png|gif|svg|pdf|zip|tar|rar|gz|dmg|js|css|exe|wma|mov|avi|wmv|mp3"}};i.check=function(e){if(e===false){return}if(e.protocol==="javascript:"){return}if(e.protocol==="mailto:"){if(this.opt.trackMailtos){a(e)}}else if(e.hostname.match(this.opt.hostRegex)){if(this.opt.trackFiles){var t=new RegExp(this.opt.extensions+"($|&)");if(e.pathname.match(t)){f(e,false)}}}else if(i.opt.trackExternalLinks){f(e,true)}};i.bindEvents=function(){if(!r){if(t.addEventListener){t.addEventListener("click",function(e){return l(e)},false)}else if(t.attachEvent){t.attachEvent("onclick",function(e){return l(e)})}r=true}};i.unbindEvents=function(){if(r){if(t.removeEventListener){t.removeEventListener("click",l,false)}else if(t.attachEvent){t.detachEvent("onclick",l)}r=false}};i.hasBoundEvents=function(){return r};i.setOptions=function(e){if(typeof e!="undefined"){if(typeof e.mode==="string"){this.opt.trackingMode=e.mode}if(typeof e.hostRegex==="string"){this.opt.hostRegex=new RegExp(e.hostRegex)}if(e.hostRegex instanceof RegExp){this.opt.hostRegex=e.hostRegex}if(typeof e.extensions!="undefined"){this.opt.extensions=e.extensions}if(typeof e.trackExternalLinks==="boolean"){this.opt.trackExternalLinks=e.trackExternalLinks}if(typeof e.trackFiles==="boolean"){this.opt.trackFiles=e.trackFiles}if(typeof e.trackMailtos==="boolean"){this.opt.trackMailtos=e.trackMailtos}if(typeof e.bindEvents==="boolean"){this.opt.bindEvents=e.bindEvents}}};i.init=function(e){this.setOptions(e);if(this.opt.bindEvents){this.bindEvents()}};return i}(window,document,location)